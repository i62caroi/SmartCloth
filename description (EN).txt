I'm doing a project called SmartCloth and it's about a digital tablecloth for diet self-management in diabetic patients. The objective of SmartCloth is for users to use it when preparing their meals to keep track of the kilocalories and portions of carbohydrates, fats, and proteins consumed, differentiating between the food they are preparing and the total number of meals already eaten in the day.

This digital tablecloth consists of a scale (based on a load cell), two keypads (one 4x5 and the other 1x5) and a TFT screen. Button pad A (the 4x5 one) has 20 buttons that represent different food groups (sweetened dairy, legumes, lean meats, etc.), while button pad B (1x5 one) has 5 buttons to mark different options and actions: (1) cooked food, (2) raw food, (3) add dish, (4) delete dish and (5) save food.

It is worth mentioning that for the "elaboration of the meals" an abstraction of the order Aliment < Dish < Meal < Accumulated for the day has been made, so that the total for the day includes all the meals made, which each have several dishes and which include different aliments.

The main operation of SmartCloth is as follows:

First of all, the user places a container on the scale, where the food will be placed. Next, they choose a food group by pressing one of the 20 buttons on button pad A, and then indicate the cooking status of the food (whether it is cooked or raw) by pressing the corresponding button on button pad B (the (1) or the (2)). It is necessary to indicate this processing option for a correct calculation of macronutrients (carbohydrates, fats and proteins) and kcal.

Once this is done, the user places the food on the scale. Then, the macronutrient and kcal information corresponding to that type of food with that weight appears on the screen, as well as the current status of the complete meal being prepared, including the latest calculated information.

At this point, a different aliment can be added to the current one by repeating the process from the moment the food group is chosen (button panel A) or, if the plate is already full, a new plate can be added (option (3) of button panel B) or save the food (option (5) of keypad B) if it is finished. If an error is made in the preparation of the dish, the current dish could be deleted with the button (4) on button panel B.

Each time one of the actions of button B is indicated ((3) add dish, (4) delete dish or (5) save food), a confirmation of the action is requested on the screen: it is confirmed by pressing the button again of the indicated action and is canceled by pressing any other button or after 10 seconds of inactivity. Upon confirmation of any of these actions, the entire plate must be removed to continue.


In summary, the general order of use of SmartCloth is:
[1] Turn on SmartCloth
[2] Place container on scale
[3] Choose food group
[4] Choose food processing (cooked or raw)
[5] Place food on scale
The next step is different depending on what you want to do:
[6.a] Return to step 3 to choose another group for a different food than the one currently weighed
[6.b] Delete current dish if error has been made
[6.c] Add new dish
[6.d] Save food


Error management has been included so that when the steps are not carried out in the indicated order, the screen will show an error message and, if necessary, a suggestion to solve it. Errors caused by pressing a button do not require any rectification, but simply mark the error and return to the previous point. However, errors due to handling the weight of the scale (for example, placing the food prematurely or removing the plate in the middle of preparation and without prior warning) do require rectification, generally removing the entire plate to starting again.

On the other hand, notification management has also been included for when you try to delete the dish or add a new one but the current one is still empty, or when you try to save the food but it has not yet been prepared no dish of it. In these situations, a warning message is displayed on the screen indicating that the plate or food is empty and that the action has not been carried out.


Regarding the information on macronutrients and kcal displayed on the screen, two "dashboards" have been created with the same structure but which, depending on the case, show the information on the "Current Meal" (CA), "Accumulated Today" (AH) o "Current Aliment" (AA) in two columns:

- Dashboard 1: CA | AH
The left column shows the information of the meal being prepared and the right column shows the total for the meals of the day, that is, the sum of the macronutrients and kcal of all the meals already made and saved previously in the day.
This dashboard is displayed 3 times: after turning on SmartCloth (CA is at 0), after placing the container (CA may already include information from previous dishes) and after removing the plate after the actions of adding dish, removing dish or saving meal. In the latter case, CA includes the data calculated up to that moment, even if the meal has just been saved, so that the total information of the food that has just been prepared is known.

- Dashboard 2: AA | AC
In the left column the information of the aliment that is currently being weighed is shown, which might not be the only one on the plate, and in the right the information of the meal that is being prepared, including the AA info. This AA info can change as the amount placed on the scale varies, causing an immediate update of the CA info displayed.
This dashboard is displayed while a dish is being prepared, that is, from when a food group is chosen (step [2]) until the food is placed (step [4]) and while this cycle is repeated with different foods..